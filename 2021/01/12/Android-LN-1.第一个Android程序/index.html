<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Android-LN-1.第一个Android程序 | zl的个人博客</title><meta name="description" content="创建 Android 项目本节课向您介绍如何使用 Android Studio 创建新的 Android 项目，并介绍该项目中的一些文件。 要创建新的 Android 项目，请按以下步骤操作：  安装最新版 Android Studio。  在 Welcome to Android Studio 窗口中，点击 Start a new Android Studio project。  图 1. An"><meta name="keywords" content="java 技术,各种小工具"><meta name="author" content="lilongzhe"><meta name="copyright" content="lilongzhe"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Android-LN-1.第一个Android程序"><meta name="twitter:description" content="创建 Android 项目本节课向您介绍如何使用 Android Studio 创建新的 Android 项目，并介绍该项目中的一些文件。 要创建新的 Android 项目，请按以下步骤操作：  安装最新版 Android Studio。  在 Welcome to Android Studio 窗口中，点击 Start a new Android Studio project。  图 1. An"><meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Android-LN-1.第一个Android程序"><meta property="og:url" content="https://llz-github.github.io/2021/01/12/Android-LN-1.%E7%AC%AC%E4%B8%80%E4%B8%AAAndroid%E7%A8%8B%E5%BA%8F/"><meta property="og:site_name" content="zl的个人博客"><meta property="og:description" content="创建 Android 项目本节课向您介绍如何使用 Android Studio 创建新的 Android 项目，并介绍该项目中的一些文件。 要创建新的 Android 项目，请按以下步骤操作：  安装最新版 Android Studio。  在 Welcome to Android Studio 窗口中，点击 Start a new Android Studio project。  图 1. An"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2021-01-12T12:26:23.789Z"><meta property="article:modified_time" content="2021-01-14T13:59:41.934Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://llz-github.github.io/2021/01/12/Android-LN-1.%E7%AC%AC%E4%B8%80%E4%B8%AAAndroid%E7%A8%8B%E5%BA%8F/"><link rel="prev" title="Android-LN-2.Android常用布局和控件的应用" href="https://llz-github.github.io/2021/01/15/Android-LN-2.Android%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E5%92%8C%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%BA%94%E7%94%A8/"><link rel="next" title="解决Spring Boot Application in default package" href="https://llz-github.github.io/2020/09/15/%E8%A7%A3%E5%86%B3Spring%20Boot%20Application%20in%20default%20package/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">48</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#创建-Android-项目"><span class="toc-number">1.</span> <span class="toc-text">创建 Android 项目</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#运行应用"><span class="toc-number">2.</span> <span class="toc-text">运行应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#在真实设备上运行"><span class="toc-number">2.1.</span> <span class="toc-text">在真实设备上运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在模拟器上运行"><span class="toc-number">2.2.</span> <span class="toc-text">在模拟器上运行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#构建简单的界面"><span class="toc-number">3.</span> <span class="toc-text">构建简单的界面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#打开布局编辑器"><span class="toc-number">3.1.</span> <span class="toc-text">打开布局编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#添加文本框"><span class="toc-number">3.2.</span> <span class="toc-text">添加文本框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#添加按钮"><span class="toc-number">3.3.</span> <span class="toc-text">添加按钮</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更改界面字符串"><span class="toc-number">3.4.</span> <span class="toc-text">更改界面字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#让文本框大小可灵活调整"><span class="toc-number">3.5.</span> <span class="toc-text">让文本框大小可灵活调整</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行应用-1"><span class="toc-number">3.6.</span> <span class="toc-text">运行应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#启动另一个-Activity"><span class="toc-number">4.</span> <span class="toc-text">启动另一个 Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#响应“Send”按钮"><span class="toc-number">4.1.</span> <span class="toc-text">响应“Send”按钮</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建一个-Intent"><span class="toc-number">4.2.</span> <span class="toc-text">构建一个 Intent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建第二个-Activity"><span class="toc-number">4.3.</span> <span class="toc-text">创建第二个 Activity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#添加文本视图"><span class="toc-number">4.4.</span> <span class="toc-text">添加文本视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#显示消息"><span class="toc-number">4.5.</span> <span class="toc-text">显示消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#添加向上导航功能"><span class="toc-number">4.6.</span> <span class="toc-text">添加向上导航功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行应用-2"><span class="toc-number">4.7.</span> <span class="toc-text">运行应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Android-Studio快捷键"><span class="toc-number">5.</span> <span class="toc-text">Android-Studio快捷键</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">zl的个人博客</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Android-LN-1.第一个Android程序</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-01-12 20:26:23"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2021-01-12</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-01-14 21:59:41"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-01-14</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="创建-Android-项目"><a href="#创建-Android-项目" class="headerlink" title="创建 Android 项目"></a>创建 Android 项目</h1><p>本节课向您介绍如何使用 Android Studio 创建新的 Android 项目，并介绍该项目中的一些文件。</p>
<p>要创建新的 Android 项目，请按以下步骤操作：</p>
<ol>
<li><p>安装最新版 <a href="https://developer.android.google.cn/studio/" target="_blank" rel="noopener">Android Studio</a>。</p>
</li>
<li><p>在 <strong>Welcome to Android Studio</strong> 窗口中，点击 <strong>Start a new Android Studio project</strong>。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112195213.png" alt="image-20210112195158526"></p>
<p><strong>图 1.</strong> Android Studio 欢迎屏幕</p>
<ol>
<li>如果您已打开一个项目，请依次选择 <strong>File &gt; New &gt; New Project</strong>。</li>
<li>在 <strong>Select a Project Template</strong> 窗口中，选择 <strong>Empty Activity</strong>，然后点击 <strong>Next</strong>。</li>
<li>在Configure your project窗口中，完成以下操作：<ul>
<li>在 <strong>Name</strong> 字段中输入“My First App”。</li>
<li>在 <strong>Package name</strong> 字段中输入“com.example.myfirstapp”。</li>
<li>如果您想将项目放在其他文件夹中，请更改其 <strong>Save</strong> 位置。</li>
<li>从 <strong>Language</strong> 下拉菜单中选择 <strong>Java</strong> 或 <strong>Kotlin</strong>。</li>
<li>在 <strong>Minimum SDK</strong> 字段中选择您的应用支持的最低 Android 版本。</li>
<li>如果您的应用需要旧版库支持，请选中 <strong>Use legacy android.support libraries</strong> 复选框。</li>
<li>其他选项保持原样。</li>
</ul>
</li>
<li>点击 <strong>Finish</strong>。</li>
</ol>
</li>
</ol>
<p>经过一段时间的处理后，Android Studio 主窗口会出现。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112195325.png" alt="image-20210112195325621"></p>
<p><strong>图 2.</strong> Android Studio 主窗口</p>
<ul>
<li><p>下面花一点时间了解一下最重要的文件。</p>
<p>首先，确保已打开 <strong>Project</strong> 窗口（依次选择 <strong>View &gt; Tool Windows &gt; Project</strong>），并从该窗口顶部的下拉列表中选择 Android 视图。随后，您可以看到以下文件：</p>
<ul>
<li><p><strong>app &gt; java &gt; com.example.myfirstapp &gt; MainActivity</strong></p>
<p>这是主 Activity。它是应用的入口点。当您构建和运行应用时，系统会启动此 <code>Activity</code> 的实例并加载其布局。</p>
</li>
<li><p><strong>app &gt; res &gt; layout &gt; activity_main.xml</strong></p>
<p>此 XML 文件定义了 Activity 界面的布局。它包含一个 <code>TextView</code> 元素，其中具有“Hello, World!”文本</p>
</li>
<li><p><strong>app &gt; manifests &gt; AndroidManifest.xml</strong></p>
<p><a href="https://developer.android.google.cn/guide/topics/manifest/manifest-intro" target="_blank" rel="noopener">清单文件</a>描述了应用的基本特性并定义了每个应用组件。</p>
</li>
<li><p><strong>Gradle Scripts &gt; build.gradle</strong></p>
<p>有两个使用此名称的文件：一个针对项目“Project: My First App”，另一个针对应用模块“Module: app”。每个模块均有自己的 <code>build.gradle</code> 文件，但此项目当前仅有一个模块。您可以使用每个模块的 <code>build.file</code> 控制 <a href="https://developer.android.google.cn/studio/releases/gradle-plugin" target="_blank" rel="noopener">Gradle 插件</a>构建应用的方式。如需详细了解此文件，请参阅<a href="https://developer.android.google.cn/studio/build#module-level" target="_blank" rel="noopener">配置构建</a>。</p>
</li>
</ul>
</li>
</ul>
<h1 id="运行应用"><a href="#运行应用" class="headerlink" title="运行应用"></a>运行应用</h1><p>以上，我们创建了一个会显示“Hello, World!” 的 Android 应用。 现在，可以在真实设备或模拟器上运行应用。</p>
<h2 id="在真实设备上运行"><a href="#在真实设备上运行" class="headerlink" title="在真实设备上运行"></a>在真实设备上运行</h2><p>按照以下步骤设置设备：</p>
<ol>
<li>使用一根 USB 数据线将设备连接到开发计算机。 如果您是在 Windows 上开发的，则可能需要为设备<a href="https://developer.android.google.cn/studio/run/oem-usb" target="_blank" rel="noopener">安装合适的 USB 驱动程序</a>。</li>
<li>执行以下步骤，在<strong>开发者选项</strong>窗口中启用 <strong>USB 调试</strong>：<ol>
<li>打开<strong>设置</strong>应用。</li>
<li>如果设备使用 Android v8.0 或更高版本，请选择<strong>系统</strong>。 否则，请继续执行下一步。</li>
<li>滚动到底部，然后选择<strong>关于手机</strong>。</li>
<li>滚动到底部，然后点按<strong>版本号</strong>七次。</li>
<li>返回上一屏幕，滚动到底部，然后点按<strong>开发者选项</strong>。</li>
<li>在<strong>开发者选项</strong>窗口中，向下滚动以查找并启用 <strong>USB 调试</strong>。</li>
</ol>
</li>
</ol>
<p>按照以下步骤操作，在设备上运行应用：</p>
<ol>
<li>在 Android Studio 中，从工具栏中的运行/调试配置下拉菜单中选择您的应用。</li>
<li>在工具栏中，从目标设备下拉菜单中选择要用来运行应用的设备。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200122.png" alt="image-20210112200121929"></p>
<p><strong>图 1.</strong> 目标设备下拉菜单</p>
<ol>
<li><p>点击 <strong>Run</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200204.png" alt="image-20210112200204324">。</p>
<p>Android Studio 会在连接的设备上安装您的应用并启动它。 您现在会看到设备上的应用中显示了“Hello, World!”。</p>
</li>
</ol>
<h2 id="在模拟器上运行"><a href="#在模拟器上运行" class="headerlink" title="在模拟器上运行"></a>在模拟器上运行</h2><p>按照以下步骤操作，在模拟器上运行应用：</p>
<ol>
<li><p>在 Android Studio 中<a href="https://developer.android.google.cn/studio/run/managing-avds#createavd" target="_blank" rel="noopener">创建一个 Android 虚拟设备 (AVD)</a>，模拟器可以使用它安装和运行您的应用。</p>
</li>
<li><p>在工具栏中，从运行/调试配置下拉菜单中选择您的应用。</p>
</li>
<li><p>从目标设备下拉菜单中，选择要用来运行应用的 AVD。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200122.png" alt="image-20210112200121929"></p>
<p><strong>图 2.</strong> 目标设备下拉菜单</p>
</li>
</ol>
<ol start="4">
<li><p>点击 <strong>Run</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200204.png" alt="image-20210112200204324">。</p>
<p>Android Studio 会在 AVD 上安装应用并启动模拟器。 您现在会看到应用中显示了“Hello, World!”。</p>
</li>
</ol>
<h1 id="构建简单的界面"><a href="#构建简单的界面" class="headerlink" title="构建简单的界面"></a>构建简单的界面</h1><p>在本节课中，您将学习如何使用 <a href="https://developer.android.google.cn/studio/write/layout-editor" target="_blank" rel="noopener">Android Studio Layout Editor</a> 创建包含一个文本框和一个按钮的布局。 这将为下一课打下基础，下节课将学习如何在点按该按钮时让应用将文本框的内容发送到其他 Activity。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200628.png" alt="image-20210112200628890"></p>
<p><strong>图 1.</strong> 最终布局的屏幕截图</p>
<p>Android 应用的界面以布局和微件的层次结构形式构建而成。 布局是 <a href="https://developer.android.google.cn/reference/android/view/ViewGroup" target="_blank" rel="noopener"><code>ViewGroup</code></a> 对象，即控制其子视图在屏幕上的放置方式的容器。 微件是 <a href="https://developer.android.google.cn/reference/android/view/View" target="_blank" rel="noopener"><code>View</code></a> 对象，即按钮和文本框等界面组件。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200653.png" alt="image-20210112200652979"></p>
<p><strong>图 2.</strong> 对象如何在布局中形成分支并包含 对象的图示。<code>ViewGroup``View</code></p>
<p>Android 提供了 <code>ViewGroup</code> 和 <code>View</code> 类的 XML 词汇表，因此界面的大部分内容都在 XML 文件中定义。不过，本文档将介绍如何使用 Android Studio 的 Layout Editor 创建布局，而不是编写 XML 代码。布局编辑器会在拖放视图构建布局时为我们编写 XML 代码。</p>
<h2 id="打开布局编辑器"><a href="#打开布局编辑器" class="headerlink" title="打开布局编辑器"></a>打开布局编辑器</h2><p>首先，请按照以下步骤设置工作区：</p>
<ol>
<li>在 Project 窗口中，依次打开 <strong>app &gt; res &gt; layout &gt; activity_main.xml</strong>。</li>
<li>要给 Layout Editor 留出空间，请隐藏 <strong>Project</strong> 窗口。 为此，请依次选择 <strong>View &gt; Tool Windows &gt; Project</strong>，或直接点击 Android Studio 屏幕左侧的 <strong>Project</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200736.png" alt="image-20210112200736240">。</li>
<li>如果您的编辑器显示 XML 源代码，请点击窗口底部的 <strong>Design</strong> 标签。</li>
<li>点击 <strong>Select Design Surface</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200755.png" alt="image-20210112200755934">，然后选择 <strong>Blueprint</strong>。</li>
<li>在 Layout Editor 工具栏中点击 <strong>Show</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200815.png" alt="image-20210112200815671">，并确保已勾选 <strong>Show All Constraints</strong>。</li>
<li>确保 Autoconnect 处于关闭状态。 当 Autoconnect 处于关闭状态时，工具栏中的提示会显示 <strong>Enable Autoconnection to Parent</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200837.png" alt="image-20210112200837611">。</li>
<li>点击工具栏中的 <strong>Default Margins</strong>，然后选择 <strong>16</strong>。 如果需要，您可以稍后调整每个视图的外边距。</li>
<li>点击工具栏中的 <strong>Device for Preview</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200858.png" alt="image-20210112200858257">，然后选择 <strong>5.5, 1440 × 2560, 560 dpi (Pixel XL)</strong>。</li>
</ol>
<p>您的布局编辑器现在如图 3 所示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200919.png" alt="image-20210112200919603"></p>
<p><strong>图 3.</strong> 显示 的布局编辑器<code>activity_main.xml</code></p>
<p>如需了解详情，请参阅 <a href="https://developer.android.google.cn/studio/write/layout-editor#intro" target="_blank" rel="noopener">布局编辑器简介</a>。</p>
<p>左下方的 <strong>Component Tree</strong> 面板显示布局的视图层次结构。在本例中，根视图是 <code>ConstraintLayout</code>，它仅包含一个 <code>TextView</code> 对象。</p>
<p><code>ConstraintLayout</code> 是一种布局，它根据同级视图和父布局的约束条件定义每个视图的位置。 这样一来，使用扁平视图层次结构既可以创建简单布局，又可以创建复杂布局。 这种布局无需嵌套布局。 嵌套布局是布局内的布局（如图 2 所示），会增加绘制界面所需的时间。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200936.png" alt="image-20210112200936774"></p>
<p><strong>图 4.</strong> 内放有两个视图的图示<code>ConstraintLayout</code></p>
<p>例如，您可以声明以下布局，如图 4 所示：</p>
<ul>
<li>视图 A 距离父布局顶部 16 dp。</li>
<li>视图 A 距离父布局左侧 16 dp。</li>
<li>视图 B 距离视图 A 右侧 16 dp。</li>
<li>视图 B 与视图 A 顶部对齐。</li>
</ul>
<p>在后面几部分中，您将构建一个与图 4 中的布局类似的布局。</p>
<h2 id="添加文本框"><a href="#添加文本框" class="headerlink" title="添加文本框"></a>添加文本框</h2><p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200952.png" alt="image-20210112200952519"></p>
<p><strong>图 5.</strong> 按照到父布局顶部和左侧的距离约束文本框</p>
<p>请按照下面的步骤添加文本框：</p>
<ol>
<li>首先，您需要移除布局中已有的内容。在 <strong>Component Tree</strong> 面板中点击 <strong>TextView</strong>，然后按 Delete 键。</li>
<li>在 <strong>Palette</strong> 面板中，点击 <strong>Text</strong> 以显示可用的文本控件。</li>
<li>将 <strong>Plain Text</strong> 拖动到设计编辑器中，并将其放在靠近布局顶部的位置。这是一个接受纯文本输入的 <code>EditText</code> 微件。</li>
<li>点击设计编辑器中的视图。 现在，您可以在每个角上看到调整视图大小的正方形手柄，并在每个边上看到圆形约束锚点。 为了更好地控制，您可能需要放大编辑器。 为此，请使用 Layout Editor 工具栏中的 <strong>Zoom</strong> 按钮。</li>
<li>点击并按住顶边上的锚点，将其向上拖动，直至其贴靠到布局顶部，然后将其释放。 这是一个约束条件：它会将视图约束在已设置的默认外边距内。 在本例中，您将其设置为距离布局顶部 16 dp。</li>
<li>使用相同的过程创建一个从视图左侧到布局左侧的约束条件。</li>
</ol>
<p>结果应如图 5 所示。</p>
<h2 id="添加按钮"><a href="#添加按钮" class="headerlink" title="添加按钮"></a>添加按钮</h2><p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201007.png" alt="image-20210112201006895"></p>
<p><strong>图 6.</strong> 按钮按照到文本框右侧的距离及其基线加以约束</p>
<ol>
<li>在 <strong>Palette</strong> 面板中，点击 <strong>Buttons</strong>。</li>
<li>将 <strong>Button</strong> 微件拖到设计编辑器中，并将其放在靠近右侧的位置。</li>
<li>创建一个从按钮左侧到文本框右侧的约束条件。</li>
<li>如需按水平对齐约束视图，请创建一个文本基线之间的约束条件。 为此，请右键点击按钮，然后选择 <strong>Show Baseline</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201048.png" alt="image-20210112201048560">。 基线锚点显示在按钮内部。 点击并按住此锚点，然后将其拖动到相邻文本框中显示的基线锚点上。</li>
</ol>
<p>结果应如图 6 所示。</p>
<blockquote>
<p><strong>注意</strong>：您还可以根据顶边或底边实现水平对齐。 但按钮的图片周围有内边距，因此如果以这种方式对齐，那么它们看上去是没有对齐的。</p>
</blockquote>
<h2 id="更改界面字符串"><a href="#更改界面字符串" class="headerlink" title="更改界面字符串"></a>更改界面字符串</h2><p>要预览界面，请点击工具栏中的 <strong>Select Design Surface</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200755.png" alt="image-20210112200755934">，然后选择 <strong>Design</strong>。 请注意，文本输入和按钮标签应设置为默认值。</p>
<p>如需更改界面字符串，请按以下步骤操作：</p>
<ol>
<li><p>打开 <strong>Project</strong> 窗口，然后依次打开 <strong>app &gt; res &gt; values &gt; strings.xml</strong>。</p>
<p>这是一个<a href="https://developer.android.google.cn/guide/topics/resources/string-resource" target="_blank" rel="noopener">字符串资源</a>文件，您可在此文件中指定所有界面字符串。 该文件可让您在一个位置管理所有界面字符串，使字符串的查找、更新和本地化变得更加容易。</p>
</li>
<li><p>点击窗口顶部的 <strong>Open editor</strong>。 此时将打开 <a href="https://developer.android.google.cn/studio/write/translations-editor" target="_blank" rel="noopener">Translations Editor</a>，它提供了一个可以添加和修改默认字符串的简单界面。 它还有助于让所有已翻译的字符串井然有序。</p>
</li>
<li><p>点击 <strong>Add Key</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201106.png" alt="image-20210112201106518">)) 可以创建一个新字符串作为文本框的“提示文本”。 此时会打开如图 7 所示的窗口。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201120.png" alt="image-20210112201120032"></p>
<p><strong>图 7.</strong> 用于添加新字符串的对话框</p>
<p>在 <strong>Add Key</strong> 对话框中，完成以下步骤：</p>
<ol>
<li>在 <strong>Key</strong> 字段中输入“edit_message”。</li>
<li>在 <strong>Default Value</strong> 字段中输入“Enter a message”。</li>
<li>点击 <strong>OK</strong>。</li>
</ol>
</li>
<li><p>再添加一个名为“button_send”且值为“Send”的键。</p>
</li>
</ol>
<p>现在，您可以为每个视图设置这些字符串。 要返回布局文件，请点击标签栏中的 <strong>activity_main.xml</strong>。 然后，添加字符串，如下所示：</p>
<ol>
<li>点击布局中的文本框，如果右侧还未显示 <strong>Attributes</strong> 窗口，请点击右侧边栏上的 <strong>Attributes</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201132.png" alt="image-20210112201132677">。</li>
<li>找到 <strong>text</strong> 属性（当前设为“Name”）并删除相应的值。</li>
<li>找到 <strong>hint</strong> 属性，然后点击文本框右侧的 <strong>Pick a Resource</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201148.png" alt="image-20210112201148482">。 在显示的对话框中，双击列表中的 <strong>edit_message</strong>。</li>
<li>点击布局中的按钮，找到其 <strong>text</strong> 属性（当前设为“Button”）。 然后点击 <strong>Pick a Resource</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201148.png" alt="image-20210112201148482">，并选择 <strong>button_send</strong>。</li>
</ol>
<h2 id="让文本框大小可灵活调整"><a href="#让文本框大小可灵活调整" class="headerlink" title="让文本框大小可灵活调整"></a>让文本框大小可灵活调整</h2><p>要创建一个适应不同屏幕尺寸的布局，您需要让文本框拉伸以填充去除按钮和外边距后剩余的所有水平空间。</p>
<p>继续操作之前，请点击工具栏中的 <strong>Select Design Surface</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200755.png" alt="image-20210112200755934">，然后选择 <strong>Blueprint</strong>。</p>
<p>如需让文本框大小可灵活调整，请按以下步骤操作：</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201230.png" alt="image-20210112201230490"></p>
<p><strong>图 8.</strong> 选择 <strong>Create Horizontal Chain</strong> 后所得到的结果</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201301.png" alt="image-20210112201300993"></p>
<p><strong>图 9.</strong> 点击以将宽度更改为 <strong>Match Constraints</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201319.png" alt="image-20210112201319369"></p>
<p><strong>图 10.</strong> 文本框现在拉伸以填充剩余空间</p>
<ol>
<li><p>选择两个视图。要执行此操作，请点击一个视图，在按住 Shift 键的同时点击另一个视图，然后右键点击任一视图并依次选择 <strong>Chains &gt; Create Horizontal Chain</strong>。布局随即显示出来，如图 8 所示。</p>
<blockquote>
<p><a href="https://developer.android.google.cn/training/constraint-layout#constrain-chain" target="_blank" rel="noopener">链</a>是两个或多个视图之间的双向约束条件，可让您采用一致的方式安排链接的视图。</p>
</blockquote>
</li>
<li><p>选择按钮并打开 <strong>Attributes</strong> 窗口。 然后，使用 <strong>Attributes</strong> 窗口顶部的视图检查器，将右外边距设为 16 dp。</p>
</li>
<li><p>点击文本框以查看其属性。 然后，点击两次宽度指示器，确保将其设为 <strong>Match Constraints</strong>，如图 9 中的标注 1 所示。</p>
<blockquote>
<p>“Match constraints”表示宽度将延长以符合水平约束条件和外边距的定义。 因此，文本框将拉伸以填充去除按钮和所有外边距后剩余的水平空间。</p>
</blockquote>
</li>
</ol>
<p>现在，布局已经完成，如图 10 所示。</p>
<p>如果您的布局看起来不像预期的那样，请<strong>查看最终布局 XML</strong>，查看您的 XML 应该是什么样子。 将其与您在 <strong>Text</strong> 标签中看到的内容进行比较。 如果您的属性以不同的顺序显示，也没关系。</p>
<p>最终布局 XML</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">    xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot;</span><br><span class="line">    xmlns:tools&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;tools&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;</span><br><span class="line">    tools:context&#x3D;&quot;com.example.myfirstapp.MainActivity&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;editText&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginStart&#x3D;&quot;16dp&quot;</span><br><span class="line">        android:layout_marginLeft&#x3D;&quot;16dp&quot;</span><br><span class="line">        android:layout_marginTop&#x3D;&quot;16dp&quot;</span><br><span class="line">        android:ems&#x3D;&quot;10&quot;</span><br><span class="line">        android:hint&#x3D;&quot;@string&#x2F;edit_message&quot;</span><br><span class="line">        android:inputType&#x3D;&quot;textPersonName&quot;</span><br><span class="line">        app:layout_constraintEnd_toStartOf&#x3D;&quot;@+id&#x2F;button&quot;</span><br><span class="line">        app:layout_constraintHorizontal_bias&#x3D;&quot;0.5&quot;</span><br><span class="line">        app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot;</span><br><span class="line">        app:layout_constraintTop_toTopOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;button&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginEnd&#x3D;&quot;16dp&quot;</span><br><span class="line">        android:layout_marginStart&#x3D;&quot;16dp&quot;</span><br><span class="line">        android:text&#x3D;&quot;@string&#x2F;button_send&quot;</span><br><span class="line">        app:layout_constraintBaseline_toBaselineOf&#x3D;&quot;@+id&#x2F;editText&quot;</span><br><span class="line">        app:layout_constraintEnd_toEndOf&#x3D;&quot;parent&quot;</span><br><span class="line">        app:layout_constraintHorizontal_bias&#x3D;&quot;0.5&quot;</span><br><span class="line">        app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;editText&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>

<p>如需详细了解链以及 <code>ConstraintLayout</code> 的其他各种用途，请阅读<a href="https://developer.android.google.cn/training/constraint-layout" target="_blank" rel="noopener">使用 ConstraintLayout 构建自适应界面</a>。</p>
<h2 id="运行应用-1"><a href="#运行应用-1" class="headerlink" title="运行应用"></a>运行应用</h2><p>如果已在以上的内容中我们已经将我们的应用安装到设备上，现在只需点击工具栏中的 <strong>Apply Changes</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201335.png" alt="image-20210112201335436">，即可使应用更新为新的布局。 或者，点击 <strong>Run</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200204.png" alt="image-20210112200204324"> 以安装并运行应用。</p>
<p>当前该按钮没有任何作用。 接着我们将学习构建在点按该按钮后会启动的另一个 Activity。</p>
<h1 id="启动另一个-Activity"><a href="#启动另一个-Activity" class="headerlink" title="启动另一个 Activity"></a>启动另一个 Activity</h1><p>学完以上内容后，我们已经构建了一个应用，该应用将显示一个 Activity（单个屏幕），其中包含一个文本字段和一个<strong>发送</strong>按钮。 在本课中，将向 <code>MainActivity</code> 添加一些代码，以便在用户点按 <strong>Send</strong> 按钮时启动一个显示消息的新 Activity。</p>
<h2 id="响应“Send”按钮"><a href="#响应“Send”按钮" class="headerlink" title="响应“Send”按钮"></a>响应“Send”按钮</h2><p>我们可以按照以下步骤向 <code>MainActivity</code> 类添加一个在点按 <strong>Send</strong> 按钮时调用的方法：</p>
<ol>
<li><p>在 <strong>app &gt; java &gt; com.example.myfirstapp &gt; MainActivity</strong> 文件中，添加以下 <code>sendMessage()</code> 方法存根：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/** Called when the user taps the Send button */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Do something in response to button</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可能会看到一条错误，因为 Android Studio 无法解析用作方法参数的 <code>View</code> 类。要清除错误，请点击 <code>View</code> 声明，将光标置于其上，然后按 Alt+Enter（或在 Mac 上按 Option+Enter）进行快速修复。如果出现一个菜单，请选择 <strong>Import class</strong>。</p>
</li>
<li><p>返回到 <strong>activity_main.xml</strong> 文件，并从该按钮调用此方法：</p>
<ol>
<li>选择 Layout Editor 中的相应按钮。</li>
<li>在 <strong>Attributes</strong> 窗口中，找到 <strong>onClick</strong> 属性，并从其下拉列表中选择 <strong>sendMessage [MainActivity]</strong>。</li>
</ol>
<p>现在，当我们点按该按钮时，系统将调用 <code>sendMessage()</code> 方法。</p>
<p>请记下此方法中的详细信息。 系统需要这些信息来识别此方法是否与 <a href="https://developer.android.google.cn/reference/android/view/View#attr_android:onClick" target="_blank" rel="noopener"><code>android:onClick</code></a> 属性兼容。 具体来说，此方法具有以下特性：</p>
<ul>
<li>公开访问。</li>
<li>返回值为空，或在 Kotlin 中为隐式<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html" target="_blank" rel="noopener">单元</a>。</li>
<li><code>View</code> 是唯一的参数。这是您在第 1 步结束时点击的 <code>View</code> 对象。</li>
</ul>
</li>
<li><p>接下来，您将填写此方法，以读取文本字段的内容，并将该文本传递给另一个 Activity。</p>
</li>
</ol>
<h2 id="构建一个-Intent"><a href="#构建一个-Intent" class="headerlink" title="构建一个 Intent"></a>构建一个 Intent</h2><p>Intent 是在相互独立的组件（如两个 Activity）之间提供运行时绑定功能的对象。Intent 表示应用执行某项操作的意图。您可以使用 Intent 执行多种任务，但在本课中，您的 Intent 将用于启动另一个 Activity。</p>
<p>在 <code>MainActivity</code> 中，添加 <code>EXTRA_MESSAGE</code> 常量和 <code>sendMessage()</code> 代码，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXTRA_MESSAGE = <span class="string">"com.example.myfirstapp.MESSAGE"</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Called when the user taps the Send button */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, DisplayMessageActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        EditText editText = (EditText) findViewById(R.id.editTextTextPersonName);</span><br><span class="line">        String message = editText.getText().toString();</span><br><span class="line">        intent.putExtra(EXTRA_MESSAGE, message);</span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>预计 Android Studio 会再次遇到 <strong>Cannot resolve symbol</strong> 错误。如需清除这些错误，请按 Alt+Enter（在 Mac 上则按 Option+Return）。您最后应导入以下内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br></pre></td></tr></table></figure>

<p><code>DisplayMessageActivity</code> 仍有错误，但没有关系。 您将在下一部分中修复该错误。</p>
<ul>
<li><p><code>sendMessage()</code> 将发生以下情况：</p>
<ul>
<li><p><code>Intent</code> 构造函数会获取两个参数：<code>Context</code> 和 <code>Class</code>。</p>
<p>首先使用 <code>Context</code> 参数，因为 <code>Activity</code> 类是 <code>Context</code> 的子类。</p>
<p>在本例中，系统将 <code>Intent,</code> 传递到的应用组件的 <code>Class</code> 参数为要启动的 Activity。</p>
</li>
<li><p><code>putExtra()</code> 方法将 <code>EditText</code> 的值添加到 Intent。<code>Intent</code> 能够以名为“extra”的键值对形式携带数据类型。</p>
<p>您的键是一个公共常量 <code>EXTRA_MESSAGE</code>，因为下一个 Activity 将使用该键检索文本值。为 Intent extra 定义键时，最好使用应用的软件包名称作为前缀。这样可以确保这些键是独一无二的，万一您的应用需要与其他应用进行交互。</p>
</li>
<li><p><code>startActivity()</code> 方法将启动一个由 <code>Intent</code> 指定的 <code>DisplayMessageActivity</code> 实例。接下来，您需要创建该类。</p>
</li>
</ul>
</li>
</ul>
<p><strong>注意</strong>：通过导航架构组件，您可以使用导航编辑器将一个 Activity 与另一个 Activity 相关联。 建立这种关联后，您可以利用 API 在用户触发关联的操作（例如，用户点击某个按钮时）时启动第二个 Activity。 如需了解详情，请参阅<a href="https://developer.android.google.cn/topic/libraries/architecture/navigation" target="_blank" rel="noopener">导航</a>。</p>
<h2 id="创建第二个-Activity"><a href="#创建第二个-Activity" class="headerlink" title="创建第二个 Activity"></a>创建第二个 Activity</h2><p>如需创建第二个 Activity，请按以下步骤操作：</p>
<ol>
<li>在 <strong>Project</strong> 窗口中，右键点击 <strong>app</strong> 文件夹，然后依次选择 <strong>New &gt; Activity &gt; Empty Activity</strong>。</li>
<li>在 <strong>Configure Activity</strong> 窗口中，输入“DisplayMessageActivity”作为 <strong>Activity Name</strong>。将所有其他属性保留为默认设置，然后点击 <strong>Finish</strong>。</li>
</ol>
<p>Android Studio 会自动执行三项操作：</p>
<ul>
<li>创建 <code>DisplayMessageActivity</code> 文件。</li>
<li>创建与 <code>DisplayMessageActivity</code> 文件对应的布局文件 <code>activity_display_message.xml</code>。</li>
<li>在 <code>AndroidManifest.xml</code> 中添加所需的 <activity> 元素。</li>
</ul>
<p>如果您运行应用并点按第一个 Activity 上的按钮，将启动第二个 Activity，但它为空。这是因为第二个 Activity 使用模板提供的空布局。</p>
<h2 id="添加文本视图"><a href="#添加文本视图" class="headerlink" title="添加文本视图"></a>添加文本视图</h2><p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201617.png" alt="image-20210112201617369"><strong>图 1.</strong> 位于布局顶部中心的文本视图。</p>
<p>新 Activity 包含一个空白布局文件。 请按以下步骤操作，在显示消息的位置添加一个文本视图：</p>
<ol>
<li>打开 <strong>app &gt; res &gt; layout &gt; activity_display_message.xml</strong> 文件。</li>
<li>点击工具栏中的 <strong>Enable Autoconnection to Parent</strong><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112200837.png" alt="image-20210112200837611">。 系统将启用 Autoconnect。 参见图 1。</li>
<li>在 <strong>Palette</strong> 面板中，点击 <strong>Text</strong>，将 <strong>TextView</strong> 拖动到布局中，然后将其放置在靠近布局顶部中心的位置，使其贴靠到出现的垂直线上。 Autoconnect 将添加左侧和右侧约束条件，以便将该视图放置在水平中心位置。</li>
<li>再创建一个从文本视图顶部到布局顶部的约束条件，使该视图如图 1 中所示。</li>
</ol>
<p>或者，您可以对文本样式进行一些调整，方法是在 <strong>Attributes</strong> 窗口的 <strong>Common Attributes</strong> 面板中展开 <strong>textAppearance</strong>，然后更改 <strong>textSize</strong> 和 <strong>textColor</strong> 等属性。</p>
<h2 id="显示消息"><a href="#显示消息" class="headerlink" title="显示消息"></a>显示消息</h2><p>在此步骤中，您将修改第二个 Activity 以显示第一个 Activity 传递的消息。</p>
<ol>
<li><p>在 <code>DisplayMessageActivity</code> 中，将以下代码添加到 <code>onCreate()</code> 方法中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_display_message);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Get the Intent that started this activity and extract the string</span></span><br><span class="line">    Intent intent = getIntent();</span><br><span class="line">    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// Capture the layout's TextView and set the string as its text</span></span><br><span class="line">    TextView textView = findViewById(R.id.textView2);</span><br><span class="line">    textView.setText(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>按 Alt+Enter（在 Mac 上则按 Option+Return）导入其他所需的类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="添加向上导航功能"><a href="#添加向上导航功能" class="headerlink" title="添加向上导航功能"></a>添加向上导航功能</h2><p>在您的应用中，不是主入口点的每个屏幕（所有不是主屏幕的屏幕）都必须提供导航功能，以便将用户引导至应用层次结构中的逻辑父级屏幕。 为此，请在<a href="https://developer.android.google.cn/training/appbar" target="_blank" rel="noopener">应用栏</a>中添加<strong>向上</strong>按钮。</p>
<p>要添加<strong>向上</strong>按钮，您需要在 <a href="https://developer.android.google.cn/guide/topics/manifest/manifest-intro" target="_blank" rel="noopener"><code>AndroidManifest.xml</code></a> 文件中声明哪个 Activity 是逻辑父级。打开 <strong>app &gt; manifests &gt; AndroidManifest.xml</strong> 文件，找到 <code>DisplayMessageActivity</code> 的 <code>&lt;activity&gt;</code> 标记，然后将其替换为以下代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".DisplayMessageActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:parentActivityName</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- The meta-data tag is required if you support API level 15 and lower --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"android.support.PARENT_ACTIVITY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:value</span>=<span class="string">".MainActivity"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Android 系统现在会自动向应用栏添加<strong>向上</strong>按钮。</p>
<h2 id="运行应用-2"><a href="#运行应用-2" class="headerlink" title="运行应用"></a>运行应用</h2><p>点击工具栏中的 <strong>Apply Changes</strong> <img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112201335.png" alt="image-20210112201335436">以运行应用。 当应用打开后，在文本字段中输入一条消息，点按 <strong>Send</strong> 即会看到该消息显示在第二个 Activity 中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210112222421.png" alt="image-20210112222420292"></p>
<p><strong>图 2.</strong> 应用已打开，文本输入在左侧屏幕并显示在右侧。</p>
<p>本课到此就结束了，您已经构建了自己的第一个 Android 应用！ </p>
<h1 id="Android-Studio快捷键"><a href="#Android-Studio快捷键" class="headerlink" title="Android-Studio快捷键"></a>Android-Studio快捷键</h1><p><img src="https://cdn.jsdelivr.net/gh/llz-github/image/img1/20210114215924.png" alt="image-20210114215701871"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">lilongzhe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://llz-github.github.io/2021/01/12/Android-LN-1.%E7%AC%AC%E4%B8%80%E4%B8%AAAndroid%E7%A8%8B%E5%BA%8F/">https://llz-github.github.io/2021/01/12/Android-LN-1.%E7%AC%AC%E4%B8%80%E4%B8%AAAndroid%E7%A8%8B%E5%BA%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://llz-github.github.io" target="_blank">zl的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/01/15/Android-LN-2.Android%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E5%92%8C%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%BA%94%E7%94%A8/"><img class="prev_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Android-LN-2.Android常用布局和控件的应用</div></div></a></div><div class="next-post pull_right"><a href="/2020/09/15/%E8%A7%A3%E5%86%B3Spring%20Boot%20Application%20in%20default%20package/"><img class="next_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">解决Spring Boot Application in default package</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By lilongzhe</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script></body></html>